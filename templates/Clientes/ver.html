<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout :: head">
<meta charset="UTF-8 " />
<title th:text="${titulo}"></title>


<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
	crossorigin="anonymous">
	
<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}">

<link th:href=@{/vendor/fontawesome-free/css/all.min.css} rel="stylesheet" type="text/css">

<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}">

<link rel="stylesheet" th:href="@{/css/sb-admin-2.min.css}">

</head>


<body>
<!-- INICIO DEL MENU -->
	<header th:fragment="header">

		<div id="wrapper">
			<ul
				class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion"
				id="accordionSidebar">

				<!--Logo y Informacion -->
				<a
					class="sidebar-brand d-flex align-items-center justify-content-center"
					th:href="@{/listar}"> <i class="fas fa-star"></i>
					<div class="sidebar-brand-text mx-3">
						HIGHT DEV <sup>5/5</sup>
					</div>
				</a>

				<!-- Divider -->
				<hr class="sidebar-divider my-0">

				<!--Inicio -->
				<li class="nav-item"><a class="nav-link"
					th:href="@{/listar}"> <i class="fas fa-home"></i> <span th:text="#{text.layout.menu.inicio}">Inicio</span></a>
				</li>

				<!-- Divider -->
				<hr class="sidebar-divider">

				<!-- Heading -->
				<div class="sidebar-heading">CRUDS</div>

				<!-- Clientes -->
				<li class="nav-item"><a class="nav-link collapsed" href="#"
					data-toggle="collapse" data-target="#collapseTwo"
					aria-expanded="true" aria-controls="collapseTwo"> <i
						class="far fa-address-card"></i> <span th:text="#{text.layout.menu.cliente}">Clientes</span>
				</a>
					<div id="collapseTwo" class="collapse" aria-labelledby="headingTwo"
						data-parent="#accordionSidebar">
						<div class="bg-white py-2 collapse-inner rounded">
							<h6 class="collapse-header"  th:text="#{text.layout.menu.opciones}">Opciones</h6>
							<a class="collapse-item"  th:text="#{text.layout.menu.listar}" th:href="@{/listar}">Listar</a> <a
								class="collapse-item"  th:text="#{text.layout.menu.agregar}" th:href="@{/ingresar}">Agregar</a>
						</div>
					</div></li>


				<!-- Proveedores -->
				<li class="nav-item"><a class="nav-link collapsed" href="#"
					data-toggle="collapse" data-target="#collapseUtilities"
					aria-expanded="true" aria-controls="collapseUtilities"> <i
						class="fas fa-archive"></i> <span th:text="#{text.layout.menu.proveedor}">Proveedores</span>
				</a>
					<div id="collapseUtilities" class="collapse"
						aria-labelledby="headingUtilities" data-parent="#accordionSidebar">
						<div class="bg-white py-2 collapse-inner rounded">
							<h6 class="collapse-header" th:text="#{text.layout.menu.opciones}">Opciones</h6>
							<a class="collapse-item" th:text="#{text.layout.menu.listar}" th:href="@{/listarProveedor}">Listar</a>
							<a class="collapse-item" th:text="#{text.layout.menu.agregar}" th:href="@{/ingresarProveedor}">Agregar</a>
						</div>
					</div></li>



				<!-- Productos y Categoria-->

				<li class="nav-item"><a class="nav-link collapsed" href="#"
					data-toggle="collapse" data-target="#collapsePages"
					aria-expanded="true" aria-controls="collapsePages"> <i
						class="fas fa-fw fa-folder"></i> <span th:text="#{text.layout.menu.producto}">Productos</span> &<span th:text="#{text.layout.menu.categoria}" class="p-1">y Categorias</span>
				</a>
					<div id="collapsePages" class="collapse"
						aria-labelledby="headingPages" data-parent="#accordionSidebar">
						<div class="bg-white py-2 collapse-inner rounded">
							<h6 class="collapse-header" th:text="#{text.layout.menu.producto}">Productos</h6>
							<a class="collapse-item" th:text="#{text.layout.menu.listar}" th:href="@{/listarProducto}">Listar</a>
							<a class="collapse-item" th:text="#{text.layout.menu.agregar}" th:href="@{/ingresarProducto}">Agregar</a>
							<div class="collapse-divider"></div>
							<h6 class="collapse-header" th:text="#{text.layout.menu.categoria}">Categoria</h6>
							<a class="collapse-item" th:text="#{text.layout.menu.listar}" th:href="@{/listarCategoria}">Listar</a>
							<a class="collapse-item" th:text="#{text.layout.menu.agregar}" th:href="@{/ingresarCategoria}">Agregar</a>
						</div>
					</div></li>

				<!-- Divider -->
				<hr class="sidebar-divider d-none d-md-block">

				<!-- Sidebar Toggler (Sidebar) -->
				<div class="text-center d-none d-md-inline">
					<button class="rounded-circle border-0" id="sidebarToggle"></button>
				</div>

			</ul>
			<!-- Content Wrapper -->
			
			<!-- INICIO DEL MENU SEGUNDARIO-->
			<div id="content-wrapper" class="d-flex flex-column">

				<!-- Main Content -->
				<div id="content">

					<!-- Topbar -->
				<nav
						class="navbar navbar-expand navbar-light bg-primary topbar  static-top shadow">

						<!-- Sidebar Toggle (Topbar) -->
						<button id="sidebarToggleTop"
							class="btn btn-link d-md-none rounded-circle mr-3">
							<i class="fa fa-bars"></i>
						</button>


						<!-- Topbar Navbar -->
						<ul class="navbar-nav ml-auto">

							<li class="nav-item dropdown no-arrow">
							<a class="nav-link dropdown-toggle" th:href="@{/locale(idioma=es_ES)}"
								th:text="#{text.local.es}"></a> 	
							</li>
							
							<li class="nav-item dropdown no-arrow">
							<a class="nav-link dropdown-toggle" th:href="@{/locale(idioma=en_US)}" th:text="#{text.local.en}"></a>
							</li>

			
							<div class="topbar-divider d-none d-sm-block"></div>
							<!-- Nav Item - User Information -->
							<li sec:authorize="isAuthenticated()"
								class="nav-item dropdown no-arrow"><a
								class="nav-link dropdown-toggle" href="#" id="userDropdown"
								role="button" data-toggle="dropdown" aria-haspopup="true"
								aria-expanded="false">
								<span sec:authentication="name"></span><i class="fas fa-sign-out-alt p-3"></i>

							</a> <!-- Dropdown - User Information -->
								<div
									class="dropdown-menu dropdown-menu-right shadow animated--grow-in bg-primary"
									aria-labelledby="userDropdown">

									<form id="LF" th:action="@{/logout}" method="post">
										<button class="dropdown-item" href="#" data-toggle="modal"
											data-target="#logoutModal"
											onclick="document.getElementById('LF').submit" type="submit">
											<i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
											Cerrar Session
										</button>

										<input type="hidden" th:name="${_csrf.parameterName}" 
											th:value="_csrf.token">

									</form>
								</div></li>

						</ul>
						
						
					</nav>

					<div class="alert alert-success" th:if="${exito != null}"
						th:text="${exito}"></div>
					<div class="alert alert-danger" th:if="${error != null}"
						th:text="${error}"></div>
					<div class="alert alert-warning" th:if="${alerta != null}"
						th:text="${alerta}"></div>
					<div class="alert alert-info" th:if="${infor != null}"
						th:text="${infor}"></div>	
						
						
				<br>
				<br>
			<!-- FIN DE LOS MENUS -->




					<!-- INICIO DEL CONTENIDO DEL SITIO -->
					<div class="container-fluid">

						

				
		<div class="card border-bottom-dark">
			<div class="card-header bg-dark text-white h4" th:text="${titulo}"></div>
			<div class="card-body "></div>

			<div class=" row m-3 mt-1">

				<h4 class="card-title">
					<a sec:authorize="hasRole('ROLE_ADMIN')"
						class="btn btn-success btn-xs "
						th:href="@{'/factura/ingresar/'+${cliente.id}}"
						th:text="#{text.cliente.detalle.boton.crearfactura}"></a>
				</h4>

				<img th:if="${#strings.length(cliente.foto)>0}" class="  float-left"
					style="max-width: 25%;" th:src="@{'/perfil/'+${cliente.foto}}"
					th:alt="${cliente.nombre}" />

				<div class="col-md-9">
					<ul class="list-group">

						<li class="list-group-item " th:text="${cliente.nombre}"></li>
						<li class="list-group-item" th:text="${cliente.apellido}"></li>
						<li class="list-group-item" th:text="${cliente.email}"></li>
						<li class="list-group-item" th:text="${cliente.fecha}"></li>
					</ul>
				</div>
				<br>
				<br>
				<div class="col-sm-15 ">
					<div th:if="${#lists.isEmpty(cliente.facturas)}"
						class="alert alert-info my-4"
						th:text="'No hay facturas asignadas para el cliente '+${cliente.nombre}"></div>
					<br>
					<table th:if="${not #lists.isEmpty(cliente.facturas)}"
						class="table table-bordered table-striped my-4">
						<thead class="thead-dark bg-dark text-white">

							<tr>

								<th th:text="#{text.cliente.detalle.descripcion}">Descripcion</th>
								<th th:text="#{text.cliente.detalle.fecha}">Fecha</th>
								<th>Total</th>
								<th sec:authorize="hasRole('ROLE_ADMIN')"
									th:text="#{text.cliente.detalle.ver}">Ver</th>
								<th sec:authorize="hasRole('ROLE_ADMIN')"
									th:text="#{text.cliente.detalle.eliminar}">Eliminar</th>
							</tr>
						</thead>

						<tbody>

							<tr th:each="factura: ${cliente.facturas}">

								<td th:text="${factura.descripcion}"></td>
								<td th:text="${factura.fecha}"></td>
								<td th:text=" '$'+${factura.total}"></td>
								<td sec:authorize="hasRole('ROLE_ADMIN')"><a
									class="btn btn-primary btn-xs"
									th:href="@{'/factura/ver/'+${factura.id}}" th:text="#{text.cliente.detalle.boton.ver}"></a></td>
									
								<td sec:authorize="hasRole('ROLE_ADMIN')"><a
									class="btn btn-danger btn-xs"
									th:href="@{'/factura/eliminar/'+${factura.id}}"
									th:text="#{text.cliente.detalle.eliminar}"
									onclick="return confirm('esta seguro que quiere eliminar la factura?');"></a></td>

							</tr>
						</tbody>

					</table>
				</div>
			</div>
		</div>
</div>


						
			
				<!-- FIN DEL SITIO -->
	



				<!-- FOOTER DEL SITIO WEB -->
				<br>
				<footer class="sticky-footer bg-white">
				
				
					<div class="container my-auto ">
						<div class="copyright text-center my-auto">
							<span th:text="#{text.layout.menu.footer}"></span>
						</div>
					</div>
					
					
					<script th:src=@{/vendor/jquery/jquery.min.js}></script>
					<script th:src=@{/vendor/jquery-easing/jquery.easing.min.js}></script>
					<script th:src=@{js/sb-admin-2.min.js}></script>

					<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
						integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
						crossorigin="anonymous"></script>
					<script
						src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
						integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
						crossorigin="anonymous"></script>
					<script
						src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
						integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
						crossorigin="anonymous"></script>
					<script
						src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
						integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
						crossorigin="anonymous"></script>
					<script
						src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
						integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
						crossorigin="anonymous"></script>
					<script src="https://code.jquery.com/jquery-3.4.1.min.js"
						integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
						crossorigin="anonymous"></script>
					<script
						src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
						integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
						crossorigin="anonymous"></script>
					<script th:src="@{/js/jquery-ui.min.js}"></script>

					<script
						src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
						integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
						crossorigin="anonymous"></script>
					<script
						src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
						integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
						crossorigin="anonymous"></script>
				</footer>
	</header>



</body>
</html>